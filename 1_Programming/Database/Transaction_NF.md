# Transaction, 정규화

- 트랜잭션(Transaction) : 데이터베이스의 상태를 변화하기 위한 작업의 단위
  - Select, Insert, Delete, Update
  - 작업단위는 사람이 정하는 기준에 따라 정해짐
  - **트랜잭션의 특징**
    - 원자성(Atomicity) : 트랜잭션은 데이터베이스에 모두 반영하거나 전혀 반영되지 않아야 한다. (데이터 처리 시스템 이해를 위해)
    - 일관성(Consistency) : 처리 결과가 항상 일관성이 있어야 한다. 트랜잭션되는 동안 변경되더라도 처음 참조한 데이터베이스 사용
    - 독립성(Isolation) : 하나의 트랜잭션은 다른 트랜잭션 연산에 끼어들 수 없음
    - 지속성(Durability) : 트랜잭션이 성공할 경우, 결과는 영구적으로 반영
  - **Commit, Rollback**
    - Commit : 트랜잭션이 끝난 뒤, 성공적으로 끝남을 알려주기 위한 연산, 트랜잭션을 로그에 저장
    - Rollback : 트랜잭션의 원자성이 깨진 경우, 트랜잭션을 처음부터 다시 시작하거나, 부분적으로 연산 결과를 취소



- 데이터 베이스의 정규화
  - 데이터베이스의 설계를 재구성하는 테크닉
  - 목적
    - 불필요한 데이터 제거
    - 논리적인 데이터 저장 (테이블 구성이 논리적, 직관적/)
  - 종류
    - 1차 정규화 : 로우마다 하나의 컬럼 값 (Atomic Value)
      - 논리적 구성은 있지만, redundancy 존재할 수 있음
    - 2차 정규화 : 기본키가 아닌 모든 속성이 완전 함수적 종속 관계 제거
      - 한 컬럼이 다른 컬럼을 설명이 가능할 때 **부분 함수적 종속관계** 라 한다.
      - 갱신할 때 문제가 발생할 수 있다.
      - 이럴 경우, 테이블을 나누어 처리
    - 3차 정규화 : 이행 함수적 종속 제거
      - 두 컬럼으로 다른 한 컬럼 설명이 가능할 때 **이행 함수적 종속 관계**
      - x-> y, y->z 이면 x->z가 되는 관계
      - 갱신할 때 문제 발생
      - 이럴 경우, 테이블 나누어 처리 (x->y), (y->z)분리
    - BCNF(Boyce-Codd Normal Form or Strong 3NF) : 테이블에 하나의 후보키 존재하고 3NF 만족시
      - 즉 모든 결정자가 key인 경우 BCNF



- 데이터 무결성(Data Integrity) : 데이터 값이 정확한 상태, 일관성과 정확성을 유지하기 위한 제약조건



- ER 다이어그램 (Entity-Relation Diagram) : 현실 세계에 존재하는 데이터와 그들 간의 관계를 사람이 이해할 수 있도록 하는 모델

  - **ER 표시**

    - 사각형 : 개체
    - 원 : 속성
    - 원안에 밑줄 : 기본키
    - 마름모 : 관계
    - 직선 : 타입과 속성
    - 사각-마름-사각 : 개체간의 관계

  - **관계 타입 유형**

    - 1 : 1
    - 1 : N
    - N : M

  - Crow feet 표기

    - 개체간 관계 갯수 표기

    - 원 : 0
    - 실선 : 1
    - 새발 : 여럿



